# –í–æ–ø—Ä–æ—Å—ã –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

–•—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ chroma `question_to_doc.py`, —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ `qwen2.5-7b-instruct-1m`

# –ú–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚úî **–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ** ‚Üí `all-MiniLM-L6-v2`

‚úî **–ï—Å–ª–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Äî —Ç–æ—á–Ω–æ—Å—Ç—å** ‚Üí `all-mpnet-base-v2`

‚úî **–ï—Å–ª–∏ –≤–∞–∂–µ–Ω —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫** ‚Üí `paraphrase-multilingual-MiniLM-L12-v2`

‚úî **–ï—Å–ª–∏ –¥–µ–ª–∞–µ—à—å RAG –¥–ª—è QA** ‚Üí `multi-qa-mpnet-base-dot-v1`

# –°–æ–∑–¥–∞–Ω–∏–µ –ë–î

`python doc_to_chroma.py [config_name]`, –æ–¥–Ω–∞–∫–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `doc_to_chroma.ipynb`, –±–æ–ª–µ–µ –Ω–æ–≤—ã–π + –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥–µ–ª–µ–π –∑–∞ —Ä–∞–∑ –∏ —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ —á–∏—Å–ª—É —Ç–æ–∫–µ–Ω–æ–≤

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —ç—Ç–∞–ª–æ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤

`question_gen.py`

### **–ö–∞–∫ —Å–∫–∞—á–∞—Ç—å –º–æ–¥–µ–ª–∏ –≤—Ä—É—á–Ω—É—é –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ LM Studio**

1. **–ò–¥–∏ –Ω–∞ Hugging Face** ‚Üí [https://huggingface.co/TheBloke]()

   –≠—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π TheBloke, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ GGUF.
2. **–ù–∞–π–¥–∏ –Ω—É–∂–Ω—É—é –º–æ–¥–µ–ª—å** (—è —É–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª —Å—Å—ã–ª–∫–∏ –Ω–∞ Q5_K_M-–≤–µ—Ä—Å–∏–∏):

   * **Mistral 7B Instruct** : [https://huggingface.co/TheBloke/Mistral-7B-Instruct-v0.2-GGUF]()
   * **Mixtral 8x7B Instruct** : [https://huggingface.co/TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF]()
   * **Nous Hermes 2 Mistral 7B** : [https://huggingface.co/TheBloke/Nous-Hermes-2-Mistral-GGUF]()
   * **OpenHermes 2.5 Mistral 7B** : [https://huggingface.co/TheBloke/OpenHermes-2.5-Mistral-GGUF]()
   * **Zephyr 7B Beta** : [https://huggingface.co/TheBloke/Zephyr-7B-Beta-GGUF]()
   * **GPT-4-judging-lmsys** : [https://huggingface.co/TheBloke/gpt-4-judging-lmsys-GGUF]()

# –î–ª—è –æ—Ü–µ–Ω–∫–∏ QA-–º–æ–¥–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∏:

* **EM (Exact Match)** ‚Äì –¥–æ–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤.
* **F1-score** ‚Äì –±–∞–ª–∞–Ω—Å —Ç–æ—á–Ω–æ—Å—Ç–∏ (precision) –∏ –ø–æ–ª–Ω–æ—Ç—ã (recall).
* **BLEU / ROUGE / METEOR** ‚Äì –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è (–∞ –Ω–µ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∏–∑ —Ç–µ–∫—Å—Ç–∞).
* **Mean Reciprocal Rank (MRR)** ‚Äì —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞.

---

# –ú–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è ChromaDB (Sentence Transformers)

## üü¢ –ê–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–µ –º–æ–¥–µ–ª–∏

### 1. `all-MiniLM-L6-v2`

- **–†–∞–∑–º–µ—Ä:** ~22MB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 384
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –ë—ã—Å—Ç—Ä–∞—è –∏ –ª—ë–≥–∫–∞—è, —Ö–æ—Ä–æ—à–∞—è –¥–ª—è –æ–±—â–∏—Ö –∑–∞–¥–∞—á.

### 2. `all-mpnet-base-v2`

- **–†–∞–∑–º–µ—Ä:** ~420MB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 768
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å MiniLM, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ.

### 3. `multi-qa-MiniLM-L6-cos-v1`

- **–†–∞–∑–º–µ—Ä:** ~22MB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 384
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤-–æ—Ç–≤–µ—Ç–æ–≤.

### 4. `multi-qa-mpnet-base-dot-v1`

- **–†–∞–∑–º–µ—Ä:** ~420MB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 768
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –•–æ—Ä–æ—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤-–æ—Ç–≤–µ—Ç–æ–≤.

### 5. `msmarco-distilbert-base-v4`

- **–†–∞–∑–º–µ—Ä:** ~134MB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 768
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---

## üåç –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–µ –º–æ–¥–µ–ª–∏ (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ)

### 6. `paraphrase-multilingual-MiniLM-L12-v2`

- **–†–∞–∑–º–µ—Ä:** ~118MB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 384
- **–Ø–∑—ã–∫–∏:** 50+ (–≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–π)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –û–¥–Ω–∞ –∏–∑ –ª—É—á—à–∏—Ö –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –ø–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—é —Å–∫–æ—Ä–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ.

### 7. `paraphrase-multilingual-mpnet-base-v2`

- **–†–∞–∑–º–µ—Ä:** ~420MB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 768
- **–Ø–∑—ã–∫–∏:** 50+ (–≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–π)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å MiniLM.

### 8. `LaBSE (sentence-transformers/LaBSE)`

- **–†–∞–∑–º–µ—Ä:** ~1.35GB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 768
- **–Ø–∑—ã–∫–∏:** 109 (–≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–π)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è –∫—Ä–æ—Å—Å-—è–∑—ã–∫–æ–≤—ã—Ö –∑–∞–¥–∞—á.

### 9. `distiluse-base-multilingual-cased-v1`

- **–†–∞–∑–º–µ—Ä:** ~478MB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 512
- **–Ø–∑—ã–∫–∏:** 15+ (–≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–π)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –õ—ë–≥–∫–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–∞—è –º–æ–¥–µ–ª—å.

### 10. `sentence-transformers/stsb-xlm-r-multilingual`

- **–†–∞–∑–º–µ—Ä:** ~1.24GB
- **–≠–º–±–µ–¥–¥–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä:** 768
- **–Ø–∑—ã–∫–∏:** 100+ (–≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–π)
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å—Ö–æ–∂–µ—Å—Ç–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö.

---



### **–ê–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–µ –º–æ–¥–µ–ª–∏ (—Ç–æ–ø-–∫–∞—á–µ—Å—Ç–≤–æ)**

1. `all-mpnet-base-v2`
   * –†–∞–∑–º–µ—Ä: ~420M
   * –û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ Microsoft MPNet
   * –û—Ç–ª–∏—á–Ω—ã–π –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ (–ª—É—á—à–µ BERT, RoBERTa)
   * [Hugging Face]()
2. `gtr-t5-large`
   * –†–∞–∑–º–µ—Ä: ~1.2B
   * –û—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ T5
   * –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á
   * [Hugging Face]()
3. `e5-large-v2`
   * –†–∞–∑–º–µ—Ä: ~1.2B
   * –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
   * –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ–∏—Å–∫–æ–≤—ã–º–∏ –¥–≤–∏–∂–∫–∞–º–∏ (BM25 + dense retrieval)
   * [Hugging Face]()

### **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–µ –º–æ–¥–µ–ª–∏ (—Ç–æ–ø-–∫–∞—á–µ—Å—Ç–≤–æ)**

1. `multilingual-e5-large`
   * –†–∞–∑–º–µ—Ä: ~1.2B
   * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç >100 —è–∑—ã–∫–æ–≤
   * –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è
   * [Hugging Face]()
2. `paraphrase-multilingual-mpnet-base-v2`
   * –†–∞–∑–º–µ—Ä: ~420M
   * –•–æ—Ä–æ—à –¥–ª—è –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ–≥–æ –ø–∞—Ä–∞—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∞–Ω–∏—è
   * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ >50 —è–∑—ã–∫–æ–≤
   * [Hugging Face]()
3. `LaBSE (Language-agnostic BERT Sentence Embeddings)`
   * –†–∞–∑–º–µ—Ä: ~470M
   * –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∫—Ä–æ—Å—Å-—è–∑—ã–∫–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
   * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ 100 —è–∑—ã–∫–æ–≤
   * [Hugging Face]()

---



–î–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏:

### 1. **Recall@K**

* –î–æ–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –ø–æ–ø–∞–≤—à–∏—Ö –≤ —Ç–æ–ø-K (—É —Ç–µ–±—è K=3).
* Recall@K=–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ç–æ–ø-K–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\text{Recall@K} = \frac{\text{–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ç–æ–ø-K}}{\text{–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤}}**Recall@K**=**–æ–±—â–µ–µ** **–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** **—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö** **–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** **–Ω–∞–π–¥–µ–Ω–Ω—ã—Ö** **—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö** **–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** **–≤** **—Ç–æ–ø**-K**.
* –í —Ç–≤–æ–µ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å Recall@3, –ø—Ä–æ–≤–µ—Ä—è—è, –µ—Å—Ç—å –ª–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ `search_ids`.

### 2. **Precision@K**

* –î–æ–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å—Ä–µ–¥–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤ —Ç–æ–ø-K.
* Precision@K=–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ç–æ–ø-KK\text{Precision@K} = \frac{\text{–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Ç–æ–ø-K}}{K}**Precision@K**=**K**–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ** **–Ω–∞–π–¥–µ–Ω–Ω—ã—Ö** **—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö** **–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** **–≤** **—Ç–æ–ø**-K**.
* –≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–æ–ø-3 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã.

### 3. **Mean Reciprocal Rank (MRR)**

* –û—Ü–µ–Ω–∏–≤–∞–µ—Ç, –Ω–∞ –∫–∞–∫–æ–º –º–µ—Å—Ç–µ —Å—Ä–µ–¥–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤–ø–µ—Ä–≤—ã–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.
* MRR=1N‚àëi=1N1ranki\text{MRR} = \frac{1}{N} \sum_{i=1}^{N} \frac{1}{\text{rank}_i}**MRR**=**N**1****‚àë**i**=**1**N****rank**i****1**, –≥–¥–µ ranki\text{rank}_i**rank**i**** ‚Äî –ø–æ–∑–∏—Ü–∏—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ —Å–ø–∏—Å–∫–µ.
* –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è `false`, —Ç–æ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ 0.

### 4. **Hit Rate@K**

* –î–æ–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤, –≥–¥–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–ø–∞–ª –≤ —Ç–æ–ø-K.
* Hit Rate@K=–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –≥–¥–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω–æ–±—â–µ–µ —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤

  $$
  \text{Hit Rate@K} = \frac{\text{–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –≥–¥–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω}}{\text{–æ–±—â–µ–µ —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤}}**Hit Rate@K**=**–æ–±—â–µ–µ****—á–∏—Å–ª–æ****–∑–∞–ø—Ä–æ—Å–æ–≤**–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ****–∑–∞–ø—Ä–æ—Å–æ–≤**, **–≥–¥–µ****—Ö–æ—Ç—è****–±—ã****–æ–¥–∏–Ω****—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π****–¥–æ–∫—É–º–µ–Ω—Ç****–Ω–∞–π–¥–µ–Ω****.
  $$
* \text{Hit Rate@K} = \frac{\text{–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –≥–¥–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω}}{\text{–æ–±—â–µ–µ —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤}}**Hit Rate@K**=**–æ–±—â–µ–µ****—á–∏—Å–ª–æ****–∑–∞–ø—Ä–æ—Å–æ–≤**–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ****–∑–∞–ø—Ä–æ—Å–æ–≤**, **–≥–¥–µ****—Ö–æ—Ç—è****–±—ã****–æ–¥–∏–Ω****—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π****–¥–æ–∫—É–º–µ–Ω—Ç****–Ω–∞–π–¥–µ–Ω****.
* –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ —ç—Ç–æ –±–∏–Ω–∞—Ä–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞: –±—ã–ª –ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å—Ä–µ–¥–∏ `search_ids`.

### 5. **Normalized Discounted Cumulative Gain (NDCG@K)**

* –£—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç –Ω–∞–ª–∏—á–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –Ω–æ –∏ –µ–≥–æ –ø–æ–∑–∏—Ü–∏—é.
* DCG=‚àëi=1Krelilog‚Å°2(i+1)\text{DCG} = \sum_{i=1}^{K} \frac{\text{rel}_i}{\log_2(i + 1)}**DCG**=**‚àë**i**=**1**K****l**o**g**2****(**i**+**1**)**rel**i****, –≥–¥–µ reli=1\text{rel}_i = 1**rel**i****=**1** –µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–µ–Ω.
* NDCG=DCGIDCG\text{NDCG} = \frac{\text{DCG}}{\text{IDCG}}**NDCG**=**IDCG**DCG****, –≥–¥–µ IDCG ‚Äî –∏–¥–µ–∞–ª—å–Ω—ã–π DCG (–µ—Å–ª–∏ –±—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—ã–ª–∏ –Ω–∞ –ø–µ—Ä–≤—ã—Ö –º–µ—Å—Ç–∞—Ö).
* –ü–æ–∑–≤–æ–ª—è–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–¥–∞—á–∏.

---
